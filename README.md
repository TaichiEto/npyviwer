# read_and_save_npy_image

## 概要
`read_and_save_npy_image.py` は、NumPy の `.npy` ファイルから指定したインデックスの画像を読み込み、表示および PNG 形式で保存するためのスクリプトです。

- 大容量データもメモリマップ（`mmap_mode='r'`）を使って効率的に読み込み
- インデックス範囲のチェック付き
- グレースケールでの表示と保存

## 前提条件
- Python 3.x
- NumPy
- Matplotlib

```bash
pip install numpy matplotlib
```

## ファイル構成
```
read_and_save_npy_image.py  # スクリプト本体
README.md                   # 本書
```

## 使い方
1. スクリプトを実行します。
   ```bash
   python read_and_save_npy_image.py
   ```
2. プロンプトに従い、以下の情報を入力します。
   - 読み込む `.npy` ファイルのパス
   - 表示・保存する画像のインデックス（0 から始まる整数）
   - 出力する PNG ファイル名（例: `output.png`）

## 引数・オプション
スクリプト実行時に対話的に入力します。

| 項目              | 説明                                                     |
|------------------|----------------------------------------------------------|
| `.npy` ファイルパス | 読み込む NumPy 形式ファイルのフルパス                     |
| 画像インデックス     | 取得する画像データのインデックス（0 ≤ index < N）
| 出力ファイル名       | 保存する PNG 形式のファイル名（拡張子を含む）             |

## 処理の流れ
1. `np.load(..., mmap_mode='r')` でファイルをメモリマップ読み込み
2. データの形状とデータ型を表示
3. インデックスの範囲チェック
4. `data[image_index, 0, :, :]` で画像を取り出し
5. Matplotlib でグレースケール表示
6. PNG ファイルとして保存

## エラー処理
- ファイル読み込み失敗や指定インデックスが範囲外の場合は、エラーメッセージを表示します。

